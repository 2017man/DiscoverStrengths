# 数据库脚本检查记录

> 对照接口文档、前端对接需求，对建表脚本的检查结果

---

## 一、检查结论摘要

| 检查项 | 状态 | 说明 |
|--------|------|------|
| 10 张 strengths_ 业务表 | ✅ 完整 | 建表脚本已包含 |
| 站点配置表 | ⚠️ 缺失 | GET /config/site 需要，已补充 |
| strengths_test_answer.suggestion | ⚠️ 缺失 | 报告「沟通与成长建议」，已补充 |
| strengths_test_types.estimate_minutes | ⚠️ 缺失 | mbti/intro 建议时长，已补充 |

---

## 二、与接口文档对应

| 接口 | 依赖表/字段 | 脚本状态 |
|------|-------------|----------|
| GET /config/site | strengths_site_config | 已新增 |
| GET /test-types/list | strengths_test_types (price, status→is_available) | ✅ |
| GET /mbti/intro | strengths_test_types (total_questions, estimate_minutes) | estimate_minutes 已补充 |
| GET /mbti/questions | strengths_test_questions, strengths_test_question_options, strengths_test_questions_section | ✅ |
| POST /mbti/submit | strengths_test_results_records, strengths_test_answer | ✅ |
| GET /mbti/report | strengths_test_answer (含 suggestion), strengths_test_dimension_sides, strengths_test_dimensions, strengths_test_results_records | suggestion 已补充 |
| POST /order/create | strengths_orders, strengths_test_results_records | ✅ |

---

## 三、已补充内容

### 3.1 新增表 strengths_site_config

供 `GET /config/site` 使用，存储 stats_count、stats_date、qrcode_wechat、qrcode_community。

### 3.2 strengths_test_answer 新增 suggestion

沟通与成长建议，对应报告接口 `suggestion` / `suggestion_text`。

### 3.3 strengths_test_types 新增 estimate_minutes

MBTI 说明页建议时长（约 N 分钟），对应 `GET /mbti/intro`。

---

## 四、无需改动的说明

- **is_available**：接口返回字段，可由后端根据 `status` 与 `code` 计算（v1.0 仅 MBTI 为 true），不建表字段
- **strengths / weaknesses 数组**：表内存 text，后端按分隔符解析为数组返回
- **dimension_code**：统一为 E-I、S-N、T-F、J-P，脚本已满足
